<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Random Quiz - No Shuffle</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .question { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .options { margin: 10px 0; }
        .correct { background-color: #d4edda; color: #155724; font-weight: bold; }
        .test-info { background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="test-info">
        <h2>ğŸ§ª Test Random Quiz - Kiá»ƒm tra viá»‡c giá»¯ nguyÃªn vá»‹ trÃ­ Ä‘Ã¡p Ã¡n</h2>
        <p><strong>Má»¥c Ä‘Ã­ch:</strong> Äáº£m báº£o khi táº¡o Ä‘á» ngáº«u nhiÃªn, vá»‹ trÃ­ Ä‘Ã¡p Ã¡n A, B, C, D Ä‘Æ°á»£c giá»¯ nguyÃªn nhÆ° trong Ä‘á» gá»‘c.</p>
        <button onclick="runTest()">Cháº¡y Test</button>
        <button onclick="console.clear()">Clear Console</button>
    </div>
    
    <div id="results"></div>

    <script type="module">
        import { allQuizzes } from './js/quiz-data.js';
        
        // Simplified version of createRandomQuiz for testing
        function createTestRandomQuiz(numQuestions = 5) {
            const allSourceQuestions = [];
            if (allQuizzes.exam1 && allQuizzes.exam1.questions) {
                allSourceQuestions.push(...allQuizzes.exam1.questions);
            }
            if (allQuizzes.exam2 && allQuizzes.exam2.questions) {
                allSourceQuestions.push(...allQuizzes.exam2.questions);
            }
            if (allQuizzes.exam3 && allQuizzes.exam3.questions) {
                allSourceQuestions.push(...allQuizzes.exam3.questions);
            }

            if (allSourceQuestions.length === 0) {
                console.error("KhÃ´ng tÃ¬m tháº¥y cÃ¢u há»i nguá»“n tá»« cÃ¡c Ä‘á» 1, 2, 3.");
                return [];
            }

            // Chá»n ngáº«u nhiÃªn má»™t sá»‘ cÃ¢u Ä‘á»ƒ test
            const shuffledQuestions = [...allSourceQuestions]
                .sort(() => Math.random() - 0.5)
                .slice(0, numQuestions)
                .map((q, index) => {
                    // Deep copy vÃ  giá»¯ nguyÃªn vá»‹ trÃ­ Ä‘Ã¡p Ã¡n
                    const questionCopy = {
                        CÃ¢u: index + 1,
                        question: q.question,
                        options: q.options.map(opt => ({
                            label: opt.label,
                            text: opt.text
                        })),
                        correctAnswer: q.correctAnswer,
                        originalCau: q.CÃ¢u // LÆ°u sá»‘ cÃ¢u gá»‘c Ä‘á»ƒ so sÃ¡nh
                    };
                    
                    return questionCopy;
                });

            return shuffledQuestions;
        }
        
        window.runTest = function() {
            console.log('ğŸš€ Báº¯t Ä‘áº§u test random quiz...\n');
            
            const randomQuestions = createTestRandomQuiz(5);
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '';
            
            randomQuestions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question';
                
                const correctOption = q.options[q.correctAnswer];
                
                questionDiv.innerHTML = `
                    <h4>CÃ¢u ${index + 1} (Gá»‘c: CÃ¢u ${q.originalCau || 'N/A'})</h4>
                    <p><strong>CÃ¢u há»i:</strong> ${q.question}</p>
                    <div class="options">
                        ${q.options.map((opt, optIndex) => `
                            <div class="${optIndex === q.correctAnswer ? 'correct' : ''}">
                                ${opt.label}. ${opt.text}
                            </div>
                        `).join('')}
                    </div>
                    <p><strong>ÄÃ¡p Ã¡n Ä‘Ãºng:</strong> ${correctOption.label} - ${correctOption.text}</p>
                `;
                
                resultsDiv.appendChild(questionDiv);
                
                console.log(`âœ… CÃ¢u ${index + 1}:`, {
                    question: q.question.substring(0, 50) + '...',
                    correctAnswer: q.correctAnswer,
                    correctLabel: correctOption.label,
                    correctText: correctOption.text.substring(0, 50) + '...',
                    allOptions: q.options.map(opt => `${opt.label}: ${opt.text.substring(0, 30)}...`)
                });
            });
            
            console.log(`\nğŸ¯ Test hoÃ n thÃ nh! ÄÃ£ táº¡o ${randomQuestions.length} cÃ¢u há»i ngáº«u nhiÃªn vá»›i vá»‹ trÃ­ Ä‘Ã¡p Ã¡n Ä‘Æ°á»£c giá»¯ nguyÃªn.`);
        };
        
        // Auto run test when page loads
        window.addEventListener('load', () => {
            setTimeout(() => {
                runTest();
            }, 500);
        });
    </script>
</body>
</html>
