<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Resize Functionality</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .test-container {
            width: 400px;
            height: 300px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            position: relative;
            margin: 50px auto;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .resize-handle {
            position: absolute;
            background-color: rgba(59, 130, 246, 0.3);
            z-index: 1000;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            touch-action: none;
            transition: background-color 0.2s;
        }
        
        .resize-handle:hover {
            background-color: rgba(59, 130, 246, 0.7);
        }
        
        .resize-handle-top {
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            cursor: n-resize;
        }
        
        .resize-handle-bottom {
            bottom: 0;
            left: 0;
            right: 0;
            height: 8px;
            cursor: s-resize;
        }
        
        .resize-handle-left {
            left: 0;
            top: 0;
            bottom: 0;
            width: 8px;
            cursor: w-resize;
        }
        
        .resize-handle-right {
            right: 0;
            top: 0;
            bottom: 0;
            width: 8px;
            cursor: e-resize;
        }
        
        .resize-handle-corner {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }
        
        .resize-handle-top-left {
            top: 0;
            left: 0;
            cursor: nw-resize;
        }
        
        .resize-handle-top-right {
            top: 0;
            right: 0;
            cursor: ne-resize;
        }
        
        .resize-handle-bottom-left {
            bottom: 0;
            left: 0;
            cursor: sw-resize;
        }
        
        .resize-handle-bottom-right {
            bottom: 0;
            right: 0;
            cursor: se-resize;
        }
        
        .info {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .debug-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="info">
        <h1>ðŸ”§ Test Resize Functionality</h1>
        <p>KÃ©o cÃ¡c cáº¡nh vÃ  gÃ³c cá»§a box Ä‘á»ƒ test resize</p>
        <p><strong>Hosting Test:</strong> Kiá»ƒm tra xem resize cÃ³ hoáº¡t Ä‘á»™ng trÃªn hosting khÃ´ng</p>
    </div>
    
    <div id="test-container" class="test-container">
        <h3>ðŸ“¦ Resizable Box</h3>
        <p>This box should be resizable from all edges and corners.</p>
        <p>If you can see colored handles when hovering, the CSS is working.</p>
        <p>If you can drag to resize, the JavaScript is working.</p>
        
        <!-- Resize handles -->
        <div class="resize-handle resize-handle-top" data-direction="top"></div>
        <div class="resize-handle resize-handle-bottom" data-direction="bottom"></div>
        <div class="resize-handle resize-handle-left" data-direction="left"></div>
        <div class="resize-handle resize-handle-right" data-direction="right"></div>
        
        <!-- Corner resize handles -->
        <div class="resize-handle resize-handle-corner resize-handle-top-left" data-direction="top-left"></div>
        <div class="resize-handle resize-handle-corner resize-handle-top-right" data-direction="top-right"></div>
        <div class="resize-handle resize-handle-corner resize-handle-bottom-left" data-direction="bottom-left"></div>
        <div class="resize-handle resize-handle-corner resize-handle-bottom-right" data-direction="bottom-right"></div>
    </div>
    
    <div id="debug-info" class="debug-info">
        <div>Status: Loading...</div>
        <div>Handles found: 0</div>
        <div>User Agent: <span id="user-agent"></span></div>
    </div>

    <script>
        function setupResize() {
            const container = document.getElementById('test-container');
            const handles = document.querySelectorAll('.resize-handle');
            const debugInfo = document.getElementById('debug-info');
            const userAgent = document.getElementById('user-agent');
            
            // Debug info
            userAgent.textContent = navigator.userAgent.substring(0, 50) + '...';
            debugInfo.children[0].textContent = `Status: Found ${handles.length} handles`;
            debugInfo.children[1].textContent = `Handles found: ${handles.length}`;
            
            console.log('Setting up resize, found handles:', handles.length);
            
            handles.forEach((handle, index) => {
                console.log(`Setting up handle ${index}:`, handle.dataset.direction);
                
                // Support both mouse and touch events
                const startEvents = ['mousedown', 'touchstart'];
                
                startEvents.forEach(eventType => {
                    handle.addEventListener(eventType, (e) => {
                        e.preventDefault();
                        console.log('Resize started:', handle.dataset.direction);
                        
                        const minWidth = 200, minHeight = 150;
                        const maxWidth = window.innerWidth * 0.8;
                        const maxHeight = window.innerHeight * 0.8;
                        
                        const startWidth = container.offsetWidth;
                        const startHeight = container.offsetHeight;
                        
                        const clientX = e.clientX || (e.touches && e.touches[0].clientX);
                        const clientY = e.clientY || (e.touches && e.touches[0].clientY);
                        
                        const startX = clientX;
                        const startY = clientY;
                        const direction = handle.dataset.direction;
                        
                        const rect = container.getBoundingClientRect();
                        const startLeft = rect.left;
                        const startTop = rect.top;
                        
                        function onMove(e) {
                            const currentX = e.clientX || (e.touches && e.touches[0].clientX);
                            const currentY = e.clientY || (e.touches && e.touches[0].clientY);
                            
                            const deltaX = currentX - startX;
                            const deltaY = currentY - startY;
                            
                            let newWidth = startWidth;
                            let newHeight = startHeight;
                            
                            switch(direction) {
                                case 'right':
                                    newWidth = Math.max(minWidth, Math.min(maxWidth, startWidth + deltaX));
                                    break;
                                case 'left':
                                    newWidth = Math.max(minWidth, Math.min(maxWidth, startWidth - deltaX));
                                    break;
                                case 'bottom':
                                    newHeight = Math.max(minHeight, Math.min(maxHeight, startHeight + deltaY));
                                    break;
                                case 'top':
                                    newHeight = Math.max(minHeight, Math.min(maxHeight, startHeight - deltaY));
                                    break;
                                case 'bottom-right':
                                    newWidth = Math.max(minWidth, Math.min(maxWidth, startWidth + deltaX));
                                    newHeight = Math.max(minHeight, Math.min(maxHeight, startHeight + deltaY));
                                    break;
                                case 'bottom-left':
                                    newWidth = Math.max(minWidth, Math.min(maxWidth, startWidth - deltaX));
                                    newHeight = Math.max(minHeight, Math.min(maxHeight, startHeight + deltaY));
                                    break;
                                case 'top-right':
                                    newWidth = Math.max(minWidth, Math.min(maxWidth, startWidth + deltaX));
                                    newHeight = Math.max(minHeight, Math.min(maxHeight, startHeight - deltaY));
                                    break;
                                case 'top-left':
                                    newWidth = Math.max(minWidth, Math.min(maxWidth, startWidth - deltaX));
                                    newHeight = Math.max(minHeight, Math.min(maxHeight, startHeight - deltaY));
                                    break;
                            }
                            
                            container.style.width = `${newWidth}px`;
                            container.style.height = `${newHeight}px`;
                        }
                        
                        function onEnd() {
                            console.log('Resize ended');
                            document.removeEventListener('mousemove', onMove);
                            document.removeEventListener('mouseup', onEnd);
                            document.removeEventListener('touchmove', onMove);
                            document.removeEventListener('touchend', onEnd);
                        }
                        
                        document.addEventListener('mousemove', onMove, { passive: false });
                        document.addEventListener('mouseup', onEnd);
                        document.addEventListener('touchmove', onMove, { passive: false });
                        document.addEventListener('touchend', onEnd);
                    }, { passive: false });
                });
            });
        }
        
        // Setup when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', setupResize);
        } else {
            setupResize();
        }
    </script>
</body>
</html>
